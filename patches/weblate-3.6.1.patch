From 92aac2f93a76fa3a30828a428f3d68ca6b080a6a Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Wed, 13 Feb 2019 18:33:03 +0100
Subject: [PATCH 1/7] set /home/weblate/.config/hub as patch for GitHub config
 file

---
 weblate/vcs/git.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/weblate/vcs/git.py b/weblate/vcs/git.py
index 796f55666c..f1504884a3 100644
--- a/weblate/vcs/git.py
+++ b/weblate/vcs/git.py
@@ -526,7 +526,7 @@ class GithubRepository(GitRepository):
         """Generate environment for process execution."""
         env = super(cls, GithubRepository)._getenv()
         # Add path to config if it exists
-        userconfig = os.path.expanduser('~/.config/hub')
+        userconfig = '/home/weblate/.config/hub'
         if os.path.exists(userconfig):
             env['HUB_CONFIG'] = userconfig
 
-- 
2.20.1


From ef32c9a618cea4a1d37a35211177dfd5aa7c9679 Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Fri, 22 Feb 2019 15:27:35 +0100
Subject: [PATCH 2/7] Strip leading and trailing . from language code (backport
 of 951c5c1028885e264af3806969dbaca1de3d153c)

---
 weblate/lang/models.py | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/weblate/lang/models.py b/weblate/lang/models.py
index d81b1573c8..19a29ff679 100644
--- a/weblate/lang/models.py
+++ b/weblate/lang/models.py
@@ -140,6 +140,9 @@ class LanguageQuerySet(models.QuerySet):
 
         # Remove some unwanted chars
         code = code.replace(' ', '').replace('(', '').replace(')', '')
+        
+        # Strip leading and trailing .
+        code = code.strip('.')
 
         # Strip leading and trailing .
         code = code.strip('.')
-- 
2.20.1


From 2ae84475a001bb1fff76317c980f16c98ac7c539 Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Fri, 22 Feb 2019 15:29:21 +0100
Subject: [PATCH 3/7] formatting

---
 weblate/lang/models.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/weblate/lang/models.py b/weblate/lang/models.py
index 19a29ff679..c156bd966f 100644
--- a/weblate/lang/models.py
+++ b/weblate/lang/models.py
@@ -140,7 +140,7 @@ class LanguageQuerySet(models.QuerySet):
 
         # Remove some unwanted chars
         code = code.replace(' ', '').replace('(', '').replace(')', '')
-        
+
         # Strip leading and trailing .
         code = code.strip('.')
 
-- 
2.20.1


From f9dfbea8c83eabbaf7b3e42cd6b82b46bafbb7fe Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Sat, 23 Feb 2019 17:20:05 +0100
Subject: [PATCH 4/7] aligned German legal requirements

---
 weblate/templates/footer.html | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/weblate/templates/footer.html b/weblate/templates/footer.html
index 483e1bbf0d..eabd954fcc 100644
--- a/weblate/templates/footer.html
+++ b/weblate/templates/footer.html
@@ -4,7 +4,12 @@
  <ul>
   <li>{% blocktrans %}Powered by {{ weblate_version_link }}{% endblocktrans %}</li>
   <li><a href="{% url 'about' %}">{% blocktrans %}About Weblate{% endblocktrans %}</a></li>
-  {% if has_legal %}<li><a href="{% url 'legal:index' %}">{% trans "Legal" %}</a></li>{% endif %}
+  {% if has_legal %}  
+  <li><a href="{$ url 'legal:index' %}">Impressum</a></li>
+  <li><a href="{% url 'legal:tos' %}">Nutzungsbedingungen</a></li>
+  <li><a href="{% url 'legal:cookies' %}">Cookies</a></li>
+  <li><a href="{$ url 'legal:privacy' %}">Datenschutz</a></li>
+  {% endif %}
   {% if status_url %}<li><a href="{{ status_url }}">{% trans "Service status" %}</a></li>{% endif %}
   <li><a href="{% url 'contact' %}">{% trans "Contact" %}</a></li>
   <li><a href="{% documentation 'index' %}">{% trans "Documentation" %}</a></li>
-- 
2.20.1


From 402f36d2c419c099aa02995c43a8ae95dcfc3099 Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Sat, 23 Feb 2019 17:28:27 +0100
Subject: [PATCH 5/7] fixed footer

---
 weblate/templates/footer.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/weblate/templates/footer.html b/weblate/templates/footer.html
index eabd954fcc..aa01c56b89 100644
--- a/weblate/templates/footer.html
+++ b/weblate/templates/footer.html
@@ -6,7 +6,7 @@
   <li><a href="{% url 'about' %}">{% blocktrans %}About Weblate{% endblocktrans %}</a></li>
   {% if has_legal %}  
   <li><a href="{$ url 'legal:index' %}">Impressum</a></li>
-  <li><a href="{% url 'legal:tos' %}">Nutzungsbedingungen</a></li>
+  <li><a href="{% url 'legal:terms' %}">Nutzungsbedingungen</a></li>
   <li><a href="{% url 'legal:cookies' %}">Cookies</a></li>
   <li><a href="{$ url 'legal:privacy' %}">Datenschutz</a></li>
   {% endif %}
-- 
2.20.1


From c52fd87b13035eb5c5413f39e6356d54fea9b98b Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Sun, 24 Feb 2019 10:32:48 +0100
Subject: [PATCH 6/7] fixed url

---
 weblate/templates/footer.html | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/weblate/templates/footer.html b/weblate/templates/footer.html
index aa01c56b89..b0e48bdfe9 100644
--- a/weblate/templates/footer.html
+++ b/weblate/templates/footer.html
@@ -4,11 +4,11 @@
  <ul>
   <li>{% blocktrans %}Powered by {{ weblate_version_link }}{% endblocktrans %}</li>
   <li><a href="{% url 'about' %}">{% blocktrans %}About Weblate{% endblocktrans %}</a></li>
-  {% if has_legal %}  
-  <li><a href="{$ url 'legal:index' %}">Impressum</a></li>
+  {% if has_legal %}    
+  <li><a href="{% url 'legal:index' %}">Impressum</a></li>
   <li><a href="{% url 'legal:terms' %}">Nutzungsbedingungen</a></li>
   <li><a href="{% url 'legal:cookies' %}">Cookies</a></li>
-  <li><a href="{$ url 'legal:privacy' %}">Datenschutz</a></li>
+  <li><a href="{% url 'legal:privacy' %}">Datenschutz</a></li>
   {% endif %}
   {% if status_url %}<li><a href="{{ status_url }}">{% trans "Service status" %}</a></li>{% endif %}
   <li><a href="{% url 'contact' %}">{% trans "Contact" %}</a></li>
-- 
2.20.1


From c09ef1b1b25dce601167ad7181b24a94f18bbe7e Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Fri, 3 May 2019 15:35:13 +0200
Subject: [PATCH 7/7] removed backport

---
 weblate/lang/models.py | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/weblate/lang/models.py b/weblate/lang/models.py
index c156bd966f..d81b1573c8 100644
--- a/weblate/lang/models.py
+++ b/weblate/lang/models.py
@@ -144,9 +144,6 @@ class LanguageQuerySet(models.QuerySet):
         # Strip leading and trailing .
         code = code.strip('.')
 
-        # Strip leading and trailing .
-        code = code.strip('.')
-
         return code
 
     def aliases_get(self, code):
-- 
2.20.1

