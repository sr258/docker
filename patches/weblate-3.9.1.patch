From 44de1f335f434d1377f14afacf3df54254f40050 Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Wed, 13 Feb 2019 18:33:03 +0100
Subject: [PATCH 1/7] set /home/weblate/.config/hub as patch for GitHub config
 file

---
 weblate/vcs/git.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/weblate/vcs/git.py b/weblate/vcs/git.py
index 5b129dc0d4..db3ec9cdf8 100644
--- a/weblate/vcs/git.py
+++ b/weblate/vcs/git.py
@@ -587,7 +587,7 @@ class GithubRepository(GitMergeRequestBase):
         """Generate environment for process execution."""
         env = super(GithubRepository, cls)._getenv()
         # Add path to config if it exists
-        userconfig = os.path.expanduser('~/.config/hub')
+        userconfig = os.path.expanduser('/home/weblate/.config/hub')
         if os.path.exists(userconfig):
             env['HUB_CONFIG'] = userconfig
 
-- 
2.20.1


From 3c64a3d937e91decaa1b036e593c0a9ff66310f9 Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Fri, 22 Feb 2019 15:27:35 +0100
Subject: [PATCH 2/7] Strip leading and trailing . from language code (backport
 of 951c5c1028885e264af3806969dbaca1de3d153c)

---
 weblate/lang/models.py | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/weblate/lang/models.py b/weblate/lang/models.py
index 9829cb779d..d4e343bcd9 100644
--- a/weblate/lang/models.py
+++ b/weblate/lang/models.py
@@ -138,6 +138,9 @@ class LanguageQuerySet(models.QuerySet):
 
         # Remove some unwanted characters
         code = code.replace(' ', '').replace('(', '').replace(')', '')
+        
+        # Strip leading and trailing .
+        code = code.strip('.')
 
         # Strip leading and trailing .
         code = code.strip('.')
-- 
2.20.1


From c0e9372ccc45fa34fac7831926ff9b838ba8ac40 Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Fri, 22 Feb 2019 15:29:21 +0100
Subject: [PATCH 3/7] formatting

---
 weblate/lang/models.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/weblate/lang/models.py b/weblate/lang/models.py
index d4e343bcd9..a5be8ca0c0 100644
--- a/weblate/lang/models.py
+++ b/weblate/lang/models.py
@@ -138,7 +138,7 @@ class LanguageQuerySet(models.QuerySet):
 
         # Remove some unwanted characters
         code = code.replace(' ', '').replace('(', '').replace(')', '')
-        
+
         # Strip leading and trailing .
         code = code.strip('.')
 
-- 
2.20.1


From 24bdb151b43a3e7e15b5c58c79456a5aa7c32bdf Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Sat, 23 Feb 2019 17:20:05 +0100
Subject: [PATCH 4/7] aligned German legal requirements

---
 weblate/templates/footer.html | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/weblate/templates/footer.html b/weblate/templates/footer.html
index 483e1bbf0d..eabd954fcc 100644
--- a/weblate/templates/footer.html
+++ b/weblate/templates/footer.html
@@ -4,7 +4,12 @@
  <ul>
   <li>{% blocktrans %}Powered by {{ weblate_version_link }}{% endblocktrans %}</li>
   <li><a href="{% url 'about' %}">{% blocktrans %}About Weblate{% endblocktrans %}</a></li>
-  {% if has_legal %}<li><a href="{% url 'legal:index' %}">{% trans "Legal" %}</a></li>{% endif %}
+  {% if has_legal %}  
+  <li><a href="{$ url 'legal:index' %}">Impressum</a></li>
+  <li><a href="{% url 'legal:tos' %}">Nutzungsbedingungen</a></li>
+  <li><a href="{% url 'legal:cookies' %}">Cookies</a></li>
+  <li><a href="{$ url 'legal:privacy' %}">Datenschutz</a></li>
+  {% endif %}
   {% if status_url %}<li><a href="{{ status_url }}">{% trans "Service status" %}</a></li>{% endif %}
   <li><a href="{% url 'contact' %}">{% trans "Contact" %}</a></li>
   <li><a href="{% documentation 'index' %}">{% trans "Documentation" %}</a></li>
-- 
2.20.1


From 168a217a27f4d5e3cb76834b2f306eb9873badc8 Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Sat, 23 Feb 2019 17:28:27 +0100
Subject: [PATCH 5/7] fixed footer

---
 weblate/templates/footer.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/weblate/templates/footer.html b/weblate/templates/footer.html
index eabd954fcc..aa01c56b89 100644
--- a/weblate/templates/footer.html
+++ b/weblate/templates/footer.html
@@ -6,7 +6,7 @@
   <li><a href="{% url 'about' %}">{% blocktrans %}About Weblate{% endblocktrans %}</a></li>
   {% if has_legal %}  
   <li><a href="{$ url 'legal:index' %}">Impressum</a></li>
-  <li><a href="{% url 'legal:tos' %}">Nutzungsbedingungen</a></li>
+  <li><a href="{% url 'legal:terms' %}">Nutzungsbedingungen</a></li>
   <li><a href="{% url 'legal:cookies' %}">Cookies</a></li>
   <li><a href="{$ url 'legal:privacy' %}">Datenschutz</a></li>
   {% endif %}
-- 
2.20.1


From a827549f90d0d05e8fe74829e0efc6e92896e814 Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Sun, 24 Feb 2019 10:32:48 +0100
Subject: [PATCH 6/7] fixed url

---
 weblate/templates/footer.html | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/weblate/templates/footer.html b/weblate/templates/footer.html
index aa01c56b89..b0e48bdfe9 100644
--- a/weblate/templates/footer.html
+++ b/weblate/templates/footer.html
@@ -4,11 +4,11 @@
  <ul>
   <li>{% blocktrans %}Powered by {{ weblate_version_link }}{% endblocktrans %}</li>
   <li><a href="{% url 'about' %}">{% blocktrans %}About Weblate{% endblocktrans %}</a></li>
-  {% if has_legal %}  
-  <li><a href="{$ url 'legal:index' %}">Impressum</a></li>
+  {% if has_legal %}    
+  <li><a href="{% url 'legal:index' %}">Impressum</a></li>
   <li><a href="{% url 'legal:terms' %}">Nutzungsbedingungen</a></li>
   <li><a href="{% url 'legal:cookies' %}">Cookies</a></li>
-  <li><a href="{$ url 'legal:privacy' %}">Datenschutz</a></li>
+  <li><a href="{% url 'legal:privacy' %}">Datenschutz</a></li>
   {% endif %}
   {% if status_url %}<li><a href="{{ status_url }}">{% trans "Service status" %}</a></li>{% endif %}
   <li><a href="{% url 'contact' %}">{% trans "Contact" %}</a></li>
-- 
2.20.1


From 5dbd5378e1dd82801aef55c0e1b681701ae784a3 Mon Sep 17 00:00:00 2001
From: Sebastian Rettig <serettig@posteo.de>
Date: Fri, 3 May 2019 15:35:13 +0200
Subject: [PATCH 7/7] removed backport

---
 weblate/lang/models.py | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/weblate/lang/models.py b/weblate/lang/models.py
index a5be8ca0c0..9829cb779d 100644
--- a/weblate/lang/models.py
+++ b/weblate/lang/models.py
@@ -142,9 +142,6 @@ class LanguageQuerySet(models.QuerySet):
         # Strip leading and trailing .
         code = code.strip('.')
 
-        # Strip leading and trailing .
-        code = code.strip('.')
-
         return code
 
     def aliases_get(self, code):
-- 
2.20.1

